<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Duplicate Message Detection | ActiveMQ Artemis Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.5.0">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
        
    
    
    <link rel="next" href="./clusters.html" />
    
    
    <link rel="prev" href="./core-bridges.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">


        
    <div class="book" data-level="39" data-basepath="." data-revision="1432117733651">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="notice.html">
            
                
                    <a href="./notice.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Legal Notice
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="preface.html">
            
                
                    <a href="./preface.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Preface
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="project-info.html">
            
                
                    <a href="./project-info.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Project Info
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="running-server.html">
            
                
                    <a href="./running-server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Running the Server
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="messaging-concepts.html">
            
                
                    <a href="./messaging-concepts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         Messaging Concepts
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="architecture.html">
            
                
                    <a href="./architecture.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         Architecture
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="using-server.html">
            
                
                    <a href="./using-server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         Using the Server
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="using-jms.html">
            
                
                    <a href="./using-jms.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         Using JMS
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="using-core.html">
            
                
                    <a href="./using-core.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         Using Core
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="jms-core-mapping.html">
            
                
                    <a href="./jms-core-mapping.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         Mapping JMS Concepts to the Core API
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="client-classpath.html">
            
                
                    <a href="./client-classpath.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         The Client Classpath
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12" data-path="examples.html">
            
                
                    <a href="./examples.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                         Examples
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13" data-path="wildcard-routing.html">
            
                
                    <a href="./wildcard-routing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                         Routing Messages With Wild Cards
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14" data-path="wildcard-syntax.html">
            
                
                    <a href="./wildcard-syntax.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                         Understanding the Apache ActiveMQ Artemis Wildcard Syntax
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="15" data-path="filter-expressions.html">
            
                
                    <a href="./filter-expressions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                         Filter Expressions
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="16" data-path="persistence.html">
            
                
                    <a href="./persistence.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                         Persistence
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="17" data-path="configuring-transports.html">
            
                
                    <a href="./configuring-transports.html">
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                         Configuring Transports
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="18" data-path="connection-ttl.html">
            
                
                    <a href="./connection-ttl.html">
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                         Detecting Dead Connections
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="19" data-path="slow-consumers.html">
            
                
                    <a href="./slow-consumers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                         Detecting Slow Consumers
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="20" data-path="transaction-config.html">
            
                
                    <a href="./transaction-config.html">
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                         Resource Manager Configuration
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="21" data-path="flow-control.html">
            
                
                    <a href="./flow-control.html">
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                         Flow Control
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="22" data-path="send-guarantees.html">
            
                
                    <a href="./send-guarantees.html">
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                         Guarantees of sends and commits
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="23" data-path="undelivered-messages.html">
            
                
                    <a href="./undelivered-messages.html">
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                         Message Redelivery and Undelivered Messages
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="24" data-path="message-expiry.html">
            
                
                    <a href="./message-expiry.html">
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                         Message Expiry
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="25" data-path="large-messages.html">
            
                
                    <a href="./large-messages.html">
                        <i class="fa fa-check"></i>
                        
                            <b>25.</b>
                        
                         Large Messages
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="26" data-path="paging.html">
            
                
                    <a href="./paging.html">
                        <i class="fa fa-check"></i>
                        
                            <b>26.</b>
                        
                         Paging
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="27" data-path="queue-attributes.html">
            
                
                    <a href="./queue-attributes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>27.</b>
                        
                         Queue Attributes
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="28" data-path="scheduled-messages.html">
            
                
                    <a href="./scheduled-messages.html">
                        <i class="fa fa-check"></i>
                        
                            <b>28.</b>
                        
                         Scheduled Messages
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="29" data-path="last-value-queues.html">
            
                
                    <a href="./last-value-queues.html">
                        <i class="fa fa-check"></i>
                        
                            <b>29.</b>
                        
                         Last-Value Queues
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="30" data-path="message-grouping.html">
            
                
                    <a href="./message-grouping.html">
                        <i class="fa fa-check"></i>
                        
                            <b>30.</b>
                        
                         Message Grouping
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="31" data-path="pre-acknowledge.html">
            
                
                    <a href="./pre-acknowledge.html">
                        <i class="fa fa-check"></i>
                        
                            <b>31.</b>
                        
                         Extra Acknowledge Modes
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="32" data-path="management.html">
            
                
                    <a href="./management.html">
                        <i class="fa fa-check"></i>
                        
                            <b>32.</b>
                        
                         Management
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="33" data-path="security.html">
            
                
                    <a href="./security.html">
                        <i class="fa fa-check"></i>
                        
                            <b>33.</b>
                        
                         Security
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="34" data-path="resource-limits.html">
            
                
                    <a href="./resource-limits.html">
                        <i class="fa fa-check"></i>
                        
                            <b>34.</b>
                        
                         Resource Limits
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="35" data-path="jms-bridge.html">
            
                
                    <a href="./jms-bridge.html">
                        <i class="fa fa-check"></i>
                        
                            <b>35.</b>
                        
                         The JMS Bridge
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="36" data-path="client-reconnection.html">
            
                
                    <a href="./client-reconnection.html">
                        <i class="fa fa-check"></i>
                        
                            <b>36.</b>
                        
                         Client Reconnection and Session Reattachment
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="37" data-path="diverts.html">
            
                
                    <a href="./diverts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>37.</b>
                        
                         Diverting and Splitting Message Flows
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="38" data-path="core-bridges.html">
            
                
                    <a href="./core-bridges.html">
                        <i class="fa fa-check"></i>
                        
                            <b>38.</b>
                        
                         Core Bridges
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="39" data-path="duplicate-detection.html">
            
                
                    <a href="./duplicate-detection.html">
                        <i class="fa fa-check"></i>
                        
                            <b>39.</b>
                        
                         Duplicate Message Detection
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="40" data-path="clusters.html">
            
                
                    <a href="./clusters.html">
                        <i class="fa fa-check"></i>
                        
                            <b>40.</b>
                        
                         Clusters
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="41" data-path="ha.html">
            
                
                    <a href="./ha.html">
                        <i class="fa fa-check"></i>
                        
                            <b>41.</b>
                        
                         High Availability and Failover
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="42" data-path="graceful-shutdown.html">
            
                
                    <a href="./graceful-shutdown.html">
                        <i class="fa fa-check"></i>
                        
                            <b>42.</b>
                        
                         Graceful Server Shutdown
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="43" data-path="libaio.html">
            
                
                    <a href="./libaio.html">
                        <i class="fa fa-check"></i>
                        
                            <b>43.</b>
                        
                         Libaio Native Libraries
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="44" data-path="thread-pooling.html">
            
                
                    <a href="./thread-pooling.html">
                        <i class="fa fa-check"></i>
                        
                            <b>44.</b>
                        
                         Thread management
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="45" data-path="logging.html">
            
                
                    <a href="./logging.html">
                        <i class="fa fa-check"></i>
                        
                            <b>45.</b>
                        
                         Logging
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="46" data-path="rest.html">
            
                
                    <a href="./rest.html">
                        <i class="fa fa-check"></i>
                        
                            <b>46.</b>
                        
                         REST Interface
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="47" data-path="embedding-activemq.html">
            
                
                    <a href="./embedding-activemq.html">
                        <i class="fa fa-check"></i>
                        
                            <b>47.</b>
                        
                         Embedding Apache ActiveMQ Artemis
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="48" data-path="spring-integration.html">
            
                
                    <a href="./spring-integration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>48.</b>
                        
                         Spring Integration
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="49" data-path="aerogear-integration.html">
            
                
                    <a href="./aerogear-integration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>49.</b>
                        
                         AeroGear Integration
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="50" data-path="vertx-integration.html">
            
                
                    <a href="./vertx-integration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>50.</b>
                        
                         VertX Integration
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="51" data-path="intercepting-operations.html">
            
                
                    <a href="./intercepting-operations.html">
                        <i class="fa fa-check"></i>
                        
                            <b>51.</b>
                        
                         Intercepting Operations
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="52" data-path="interoperability.html">
            
                
                    <a href="./interoperability.html">
                        <i class="fa fa-check"></i>
                        
                            <b>52.</b>
                        
                         Interoperability
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="53" data-path="tools.html">
            
                
                    <a href="./tools.html">
                        <i class="fa fa-check"></i>
                        
                            <b>53.</b>
                        
                         Tools
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="54" data-path="perf-tuning.html">
            
                
                    <a href="./perf-tuning.html">
                        <i class="fa fa-check"></i>
                        
                            <b>54.</b>
                        
                         Performance Tuning
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="55" data-path="configuration-index.html">
            
                
                    <a href="./configuration-index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>55.</b>
                        
                         Configuration Reference
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >ActiveMQ Artemis Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_14">
                    
                        <h1 id="duplicate-message-detection">Duplicate Message Detection</h1>
<p>Apache ActiveMQ Artemis includes powerful automatic duplicate message detection,
filtering out duplicate messages without you having to code your own
fiddly duplicate detection logic at the application level. This chapter
will explain what duplicate detection is, how Apache ActiveMQ Artemis uses it and how
and where to configure it.</p>
<p>When sending messages from a client to a server, or indeed from a server
to another server, if the target server or connection fails sometime
after sending the message, but before the sender receives a response
that the send (or commit) was processed successfully then the sender
cannot know for sure if the message was sent successfully to the
address.</p>
<p>If the target server or connection failed after the send was received
and processed but before the response was sent back then the message
will have been sent to the address successfully, but if the target
server or connection failed before the send was received and finished
processing then it will not have been sent to the address successfully.
From the senders point of view it&#39;s not possible to distinguish these
two cases.</p>
<p>When the server recovers this leaves the client in a difficult
situation. It knows the target server failed, but it does not know if
the last message reached its destination ok. If it decides to resend the
last message, then that could result in a duplicate message being sent
to the address. If each message was an order or a trade then this could
result in the order being fulfilled twice or the trade being double
booked. This is clearly not a desirable situation.</p>
<p>Sending the message(s) in a transaction does not help out either. If the
server or connection fails while the transaction commit is being
processed it is also indeterminate whether the transaction was
successfully committed or not!</p>
<p>To solve these issues Apache ActiveMQ Artemis provides automatic duplicate messages
detection for messages sent to addresses.</p>
<h2 id="using-duplicate-detection-for-message-sending">Using Duplicate Detection for Message Sending</h2>
<p>Enabling duplicate message detection for sent messages is simple: you
just need to set a special property on the message to a unique value.
You can create the value however you like, as long as it is unique. When
the target server receives the message it will check if that property is
set, if it is, then it will check in its in memory cache if it has
already received a message with that value of the header. If it has
received a message with the same value before then it will ignore the
message.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Using duplicate detection to move messages between nodes can give you
the same <em>once and only once</em> delivery guarantees as if you were using
an XA transaction to consume messages from source and send them to the
target, but with less overhead and much easier configuration than
using XA.</p>
</blockquote>
<p>If you&#39;re sending messages in a transaction then you don&#39;t have to set
the property for <em>every</em> message you send in that transaction, you only
need to set it once in the transaction. If the server detects a
duplicate message for any message in the transaction, then it will
ignore the entire transaction.</p>
<p>The name of the property that you set is given by the value of
<code>org.apache.activemq.artemis.api.core.Message.HDR_DUPLICATE_DETECTION_ID</code>, which
is <code>_AMQ_DUPL_ID</code></p>
<p>The value of the property can be of type <code>byte[]</code> or <code>SimpleString</code> if
you&#39;re using the core API. If you&#39;re using JMS it must be a <code>String</code>,
and its value should be unique. An easy way of generating a unique id is
by generating a UUID.</p>
<p>Here&#39;s an example of setting the property using the core API:</p>
<pre><code class="lang-java">...

ClientMessage message = session.createMessage(<span class="hljs-keyword">true</span>);

SimpleString myUniqueID = <span class="hljs-string">"This is my unique id"</span>;   <span class="hljs-comment">// Could use a UUID for this</span>

message.setStringProperty(HDR_DUPLICATE_DETECTION_ID, myUniqueID);
</code></pre>
<p>And here&#39;s an example using the JMS API:</p>
<pre><code class="lang-java">...

Message jmsMessage = session.createMessage();

String myUniqueID = <span class="hljs-string">"This is my unique id"</span>;   <span class="hljs-comment">// Could use a UUID for this</span>

message.setStringProperty(HDR_DUPLICATE_DETECTION_ID.toString(), myUniqueID);

...
</code></pre>
<h2 id="configuring-the-duplicate-id-cache">Configuring the Duplicate ID Cache</h2>
<p>The server maintains caches of received values of the
<code>org.apache.activemq.artemis.core.message.impl.HDR_DUPLICATE_DETECTION_ID</code>
property sent to each address. Each address has its own distinct cache.</p>
<p>The cache is a circular fixed size cache. If the cache has a maximum
size of <code>n</code> elements, then the <code>n + 1</code>th id stored will overwrite the
<code>0</code>th element in the cache.</p>
<p>The maximum size of the cache is configured by the parameter
<code>id-cache-size</code> in <code>broker.xml</code>, the default value is
<code>2000</code> elements.</p>
<p>The caches can also be configured to persist to disk or not. This is
configured by the parameter <code>persist-id-cache</code>, also in
<code>broker.xml</code>. If this is set to <code>true</code> then each id will
be persisted to permanent storage as they are received. The default
value for this parameter is <code>true</code>.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>When choosing a size of the duplicate id cache be sure to set it to a
larger enough size so if you resend messages all the previously sent
ones are in the cache not having been overwritten.</p>
</blockquote>
<h2 id="duplicate-detection-and-bridges">Duplicate Detection and Bridges</h2>
<p>Core bridges can be configured to automatically add a unique duplicate
id value (if there isn&#39;t already one in the message) before forwarding
the message to it&#39;s target. This ensures that if the target server
crashes or the connection is interrupted and the bridge resends the
message, then if it has already been received by the target server, it
will be ignored.</p>
<p>To configure a core bridge to add the duplicate id header, simply set
the <code>use-duplicate-detection</code> to <code>true</code> when configuring a bridge in
<code>broker.xml</code>.</p>
<p>The default value for this parameter is <code>true</code>.</p>
<p>For more information on core bridges and how to configure them, please
see <a href="core-bridges.html">Core Bridges</a>.</p>
<h2 id="duplicate-detection-and-cluster-connections">Duplicate Detection and Cluster Connections</h2>
<p>Cluster connections internally use core bridges to move messages
reliable between nodes of the cluster. Consequently they can also be
configured to insert the duplicate id header for each message they move
using their internal bridges.</p>
<p>To configure a cluster connection to add the duplicate id header, simply
set the <code>use-duplicate-detection</code> to <code>true</code> when configuring a cluster
connection in <code>broker.xml</code>.</p>
<p>The default value for this parameter is <code>true</code>.</p>
<p>For more information on cluster connections and how to configure them,
please see <a href="clusters.html">Clusters</a>.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./core-bridges.html" class="navigation navigation-prev " aria-label="Previous page: Core Bridges"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./clusters.html" class="navigation navigation-next " aria-label="Next page: Clusters"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>

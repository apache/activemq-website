<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ActiveMQ</title>
    <link rel="icon" type="image/png" href="/assets/img/favicon.png">

    <link rel="stylesheet" href="/css/main.css">
    <script defer src="/js/fontawesome-all.min.js" integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc"></script>
    <script src="/js/jquery.slim.min.js" integrity="sha384-5AkRS45j4ukf+JbWAfHL8P4onPA9p0KwwP7pUdjSQA3ss9edbJUJc/XcYAiheSSz"></script>
    <script src="/js/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"></script>
    <script src="/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"></script>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container">
        <!-- <a class="navbar-brand mr-auto" href="#"><img style="height: 50px" src="assets/img/apache-feather.png" /></a> -->
        <a class="navbar-brand mr-auto" href="/"><img src="/assets/img/activemq_logo_black_small.png" style="height: 50px"/></a>
        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="ml-auto collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="/news">News</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownComponents" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Components<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-center" aria-labelledby="navbarDropdownComponents">
                        <div class="row">
                            <div class="col-12">
                                <ul class="multi-column-dropdown">
                                    <li class="nav-item"><a class="dropdown-item" href="/components/classic">ActiveMQ Classic</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/artemis/">ActiveMQ Artemis</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/artemis-console/">ActiveMQ Artemis Console</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/nms">NMS Clients</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/cms">CMS Client</a></li>
                                </ul>
                            </div>
                        </div>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownCommunity" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Community<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-center multi-column columns-1" aria-labelledby="navbarDropdownCommunity">
                        <div class="row">
                            <div class="col-12">
                                <ul class="multi-column-dropdown">
                                    <li class="nav-item"><a class="dropdown-item" href="/contact">Contact Us</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/contributing">Contribute</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/issues">Report Issues</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/support">Get Support</a></li>
                                </ul>
                            </div>
                          </div>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownTeam" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="/assets/img/asf_logo_wide.png" style="height:20px">Apache<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-center multi-column columns-1" aria-labelledby="navbarDropdownTeam">
                        <div class="row">
                            <div class="col-sm-12">
                                <ul class="multi-column-dropdown">
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org">The Apache Software Foundation</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/licenses/">License</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/security-advisories">Security</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/events/current-event">Events</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://people.apache.org/phonebook.html?pmc=activemq">PMC & Committers</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://whimsy.apache.org/board/minutes/ActiveMQ.html">Board Reports</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a></li>
                                </ul>
                            </div>
                        </div>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="content">
  <div class="page-title-classic">
    <div class="container">
      <h1>Xml Reference</h1>
    </div>
  </div>
  <div class="container" >
    <div class="row" style="margin-top: 30px">
      <div class="col-12 classic">
        <p><a href="using-activemq-classic">Using ActiveMQ Classic</a> &gt; <a href="xml-reference">Xml Reference</a></p>

<h2 id="activemq-classic-xml-reference">ActiveMQ Classic Xml Reference</h2>

<p>This page contains a link to the XML reference guides and XML schema documents for <a href="xml-configuration">Xml Configuration</a> with ActiveMQ Classic releases</p>

<h3 id="released-schemas">Released Schemas</h3>

<table>
  <thead>
    <tr>
      <th>Version</th>
      <th>Reference</th>
      <th>XML Schema</th>
      <th>XML Schema namespace</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ActiveMQ v5.17.2</td>
      <td><a href="http://activemq.apache.org/schema/core/activemq-core-5.17.2-schema.html">Reference</a></td>
      <td><a href="http://activemq.apache.org/schema/core/activemq-core-5.17.2.xsd">http://activemq.apache.org/schema/core/activemq-core-5.17.2.xsd</a></td>
      <td><a href="http://activemq.apache.org/schema/core">http://activemq.apache.org/schema/core</a></td>
    </tr>
    <tr>
      <td>ActiveMQ v5.16.5</td>
      <td><a href="http://activemq.apache.org/schema/core/activemq-core-5.16.5-schema.html">Reference</a></td>
      <td><a href="http://activemq.apache.org/schema/core/activemq-core-5.16.5.xsd">http://activemq.apache.org/schema/core/activemq-core-5.16.5.xsd</a></td>
      <td><a href="http://activemq.apache.org/schema/core">http://activemq.apache.org/schema/core</a></td>
    </tr>
  </tbody>
</table>

<p>Browse all versions: <a href="http://activemq.apache.org/schema/core/">Schema listing</a></p>

<h2 id="using-the-xsds-in-configuration-files">Using the XSDs in configuration files</h2>

<p>If you are using XBean to parse the XML configurations, the XML validation is optional so you do not need to specify the XML Schema Locations. However if you are using <a href="#">Spring</a>â€™s 2.0 XML handling to parse the XML then you need to refer to the XSD locations in your XML document because Spring uses schema namespace or schema location to resolve namespace handlers. Without correct namespace definition you will get messages like below:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Unable to locate NamespaceHandler for namespace [http://activemq.org/config/1.0]
</code></pre></div></div>
<p>You can refer to a specific version of the XSD in your XML as follows</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:amq="http://activemq.org/config/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
        http://activemq.org/config/1.0 http://activemq.apache.org/schema/core/activemq-core-4.1.2.xsd"&gt;
</code></pre></div></div>
<p>or if you prefer you can use a generic XSD without the version number</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:amq="http://activemq.org/config/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
        http://activemq.org/config/1.0 http://activemq.apache.org/schema/activemq-core.xsd"&gt;
</code></pre></div></div>
<p>Your IDE wonâ€™t be able to fetch this XSD, youâ€™ll have to manually associate a specific release; however it does mean that you wonâ€™t have to upgrade your XML config file with each ActiveMQ Classic release; as it will resolve this XSD using the bundled XSD inside the activemq-core.jar.</p>

<h3 id="pay-attention-to-the-namespace">Pay attention to the namespace</h3>

<p>If you use ActiveMQ Classic 5.0 or earlier you XML namespace definition should point to <a href="http://activemq.org/config/1.0">http://activemq.org/config/1.0</a>. If you use ActiveMQ Classic 5.1 or later the namespace should point to <a href="http://activemq.apache.org/schema/core">http://activemq.apache.org/schema/core</a>.</p>

<p>`ActiveMQ Classic 5.2 example**</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:amq="http://activemq.apache.org/schema/core"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://activemq.apache.org/schema/core
        http://activemq.apache.org/schema/core/activemq-core-5.2.0.xsd
    "&gt;
&lt;/beans&gt;
</code></pre></div></div>

<p>`ActiveMQ Classic 5.0 example**</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:amq="http://activemq.org/config/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://activemq.org/config/1.0
        http://activemq.apache.org/schema/core/activemq-core-5.0.0.xsd
    "&gt;
&lt;/beans&gt;
</code></pre></div></div>

<p>Both examples above are almost the same. Only one difference is xml namespace. You can find more information about the namespace change on <a href="http://old.nabble.com/ActiveMQ-namespace-change-td16769650.html">activemq-dev topic: ActiveMQ Classic namespace change</a>.</p>

<h3 id="schema-validation">Schema Validation</h3>

<blockquote>
  <p><strong>Note:</strong> The xml configuration ordering constraint is removed in <a href="https://issues.apache.org/jira/browse/AMQ-3570">5.6</a>, the broker element</p>
</blockquote>

<h4 id="alphabetically-ordered-xml-elements-54---551">Alphabetically Ordered XML Elements (5.4 - 5.5.1)</h4>

<p>XMLSchema:sequence is replaced with an XMLSchema:all</p>

<p>Note: from version 5.4.2, you can disable validation from the command line by appending a query parameter to the xbean url. This will allow you to reuse your existing xml configuration â€˜as isâ€™ if needed.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/activemq console xbean:conf/activemq.xml?validate=false
</code></pre></div></div>
<p>Beginning in ActiveMQ Classic 5.4, the XML elements inside the <code class="language-plaintext highlighter-rouge">&lt;broker&gt;</code> element must be ordered alphabetically. If you look at the XSD, this has always been the case with ActiveMQ Classic. The difference in 5.4 is that the XML configuration is actually being validated against the XML schema.</p>

<p>For example, the following XML configuration did not present a problem in ActiveMQ Classic 5.3.x:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?xml version="1.0"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd   
http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd      
http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd"&gt;
  
  &lt;broker xmlns="http://activemq.apache.org/schema/core" brokerName="brokerB1" destroyApplicationContextOnStop="true"&gt;
    
    &lt;plugins&gt;
      &lt;loggingBrokerPlugin/&gt;
    &lt;/plugins&gt;
    
    &lt;persistenceAdapter&gt;
      &lt;kahaDB directory="${activemq.base}/data/kahadb" enableJournalDiskSyncs="false" indexWriteBatchSize="10000" indexCacheSize="1000"/&gt;
    &lt;/persistenceAdapter&gt;
    
    &lt;destinationPolicy&gt;
      &lt;policyMap&gt;
        &lt;policyEntries&gt;
          &lt;policyEntry queue="&gt;" producerFlowControl="true" memoryLimit="5mb"&gt;
            &lt;deadLetterStrategy&gt;
              &lt;individualDeadLetterStrategy queuePrefix="DLQ." useQueueForQueueMessages="true"/&gt;
            &lt;/deadLetterStrategy&gt;
          &lt;/policyEntry&gt;
        &lt;/policyEntries&gt;
      &lt;/policyMap&gt;
    &lt;/destinationPolicy&gt;
    
    &lt;managementContext&gt;
      &lt;managementContext createConnector="false"/&gt;
    &lt;/managementContext&gt;
    
    &lt;systemUsage&gt;
      &lt;systemUsage&gt;
        &lt;memoryUsage&gt;
          &lt;memoryUsage limit="420 mb"/&gt;
        &lt;/memoryUsage&gt;
        &lt;storeUsage&gt;
          &lt;storeUsage limit="1 gb"/&gt;
        &lt;/storeUsage&gt;
        &lt;tempUsage&gt;
          &lt;tempUsage limit="250 mb"/&gt;
        &lt;/tempUsage&gt;
      &lt;/systemUsage&gt;
    &lt;/systemUsage&gt;
    
    &lt;transportConnectors&gt;
      &lt;transportConnector name="tcp" uri="tcp://0.0.0.0:61616"/&gt;
    &lt;/transportConnectors&gt;
    
  &lt;/broker&gt;
  
&lt;/beans&gt;
</code></pre></div></div>

<p>However, in ActiveMQ Classic 5.4, the XML configuration above would cause an exception similar to the following:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 'persistenceAdapter'. One of '{"http://activemq.apache.org/schema/core":producerSystemUsage, "http://activemq.apache.org/schema/core":proxyConnectors, "http://activemq.apache.org/schema/core":regionBroker, "http://activemq.apache.org/schema/core":services, "http://activemq.apache.org/schema/core":shutdownHooks, "http://activemq.apache.org/schema/core":sslContext, "http://activemq.apache.org/schema/core":systemUsage, "http://activemq.apache.org/schema/core":taskRunnerFactory, "http://activemq.apache.org/schema/core":tempDataStore, "http://activemq.apache.org/schema/core":transportConnectorURIs, "http://activemq.apache.org/schema/core":transportConnectors, WC["http://activemq.apache.org/schema/core"](#)}' is expected.
</code></pre></div></div>
<p>To avoid this XML validation error in ActiveMQ Classic 5.4, simply change the ordering of the XML elements so that they are in alphabetical order. Below is an example of the same XML configuration but in alphabetical order:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?xml version="1.0"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd   
http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd      
http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd"&gt;
  
  &lt;broker xmlns="http://activemq.apache.org/schema/core" brokerName="brokerB1" destroyApplicationContextOnStop="true"&gt;
    
    &lt;destinationPolicy&gt;
      &lt;policyMap&gt;
        &lt;policyEntries&gt;
          &lt;policyEntry queue="&gt;" producerFlowControl="true" memoryLimit="5mb"&gt;
            &lt;deadLetterStrategy&gt;
              &lt;individualDeadLetterStrategy queuePrefix="DLQ." useQueueForQueueMessages="true"/&gt;
            &lt;/deadLetterStrategy&gt;
          &lt;/policyEntry&gt;
        &lt;/policyEntries&gt;
      &lt;/policyMap&gt;
    &lt;/destinationPolicy&gt;
    
    &lt;managementContext&gt;
      &lt;managementContext createConnector="false"/&gt;
    &lt;/managementContext&gt;

    &lt;persistenceAdapter&gt;
      &lt;kahaDB directory="${activemq.base}/data/kahadb" enableJournalDiskSyncs="false" indexWriteBatchSize="10000" indexCacheSize="1000"/&gt;
    &lt;/persistenceAdapter&gt;

    &lt;plugins&gt;
      &lt;loggingBrokerPlugin/&gt;
    &lt;/plugins&gt;
    
    &lt;systemUsage&gt;
      &lt;systemUsage&gt;
        &lt;memoryUsage&gt;
          &lt;memoryUsage limit="420 mb"/&gt;
        &lt;/memoryUsage&gt;
        &lt;storeUsage&gt;
          &lt;storeUsage limit="1 gb"/&gt;
        &lt;/storeUsage&gt;
        &lt;tempUsage&gt;
          &lt;tempUsage limit="250 mb"/&gt;
        &lt;/tempUsage&gt;
      &lt;/systemUsage&gt;
    &lt;/systemUsage&gt;
    
    &lt;transportConnectors&gt;
      &lt;transportConnector name="tcp" uri="tcp://0.0.0.0:61616"/&gt;
    &lt;/transportConnectors&gt;
    
  &lt;/broker&gt;
  
&lt;/beans&gt;
</code></pre></div></div>

<p>Configurations can be easily tested against ActiveMQ Classic 5.4 using the ActiveMQ Classic startup script. Below is an example:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd $ACTIVEMQ_HOME  
$ ./bin/activemq console xbean:file:/Users/bsnyder/SpringSource/clients/Finra/activemq-example-unordered.xml  
INFO: Using default configuration  
(you can configure options in one of these file: /etc/default/activemq /Users/bsnyder/.activemqrc)

INFO: Invoke the following command to create a configuration file  
./bin/activemq setup \[ /etc/default/activemq | /Users/bsnyder/.activemqrc \]

INFO: Using java '/System/Library/Frameworks/JavaVM.framework/Home/bin/java'  
INFO: Starting in foreground, this is just for debugging purposes (stop process by pressing CTRL+C)  
Java Runtime: Apple Inc. 1.6.0_20 /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home  
Heap sizes: current=258880k free=253106k max=258880k  
JVM args: -Xms256M -Xmx256M -Dorg.apache.activemq.UseDedicatedTaskRunner=true -Djava.util.logging.config.file=logging.properties -Dcom.sun.management.jmxremote -Dactivemq.classpath=/Users/bsnyder/amq/apache-activemq-5.4.1/conf; -Dactivemq.home=/Users/bsnyder/amq/apache-activemq-5.4.1 -Dactivemq.base=/Users/bsnyder/amq/apache-activemq-5.4.1  
ACTIVEMQ_HOME: /Users/bsnyder/amq/apache-activemq-5.4.1  
ACTIVEMQ_BASE: /Users/bsnyder/amq/apache-activemq-5.4.1  
Loading message broker from: xbean:file:/Users/bsnyder/SpringSource/clients/Finra/activemq-example-unordered.xml  
...
</code></pre></div></div>

      </div>
    </div>
  </div>
</div>
<div class="row sitemap">
  <div class="col-sm-12">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <div class="row">
            <div class="col-sm-3">
              <div >
                <img class="float-left" style="max-height: 100px" src="/assets/img/activemq_logo_white_vertical_small.png"/>
              </div>
            </div>
            <div style="text-align: center; margin-bottom: 0px; margin-top: 30px; font-size: 65%" class="col-sm-6">
              <p><a href="https://www.apache.org/foundation/marks/list/">Apache, ActiveMQ, Apache ActiveMQ</a>, the Apache feather logo, and the Apache ActiveMQ project logo are trademarks of The Apache Software Foundation. Copyright &copy; 2025, The Apache Software Foundation. Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>.</p>
            </div>
            <div class="col-sm-3">
              <div >
                <a href="https://www.apache.org"><img class="float-right" style="margin-top: 10px; max-height: 80px" src="/assets/img/Apache_PoweredBy.png"/></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>

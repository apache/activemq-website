<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ActiveMQ</title>
    <link rel="icon" type="image/png" href="/assets/img/favicon.png">

    <link rel="stylesheet" href="/css/main.css">
    <script defer src="/js/fontawesome-v5.0.8-all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ"></script>
    <script src="/js/jquery-3.6.1.slim.min.js" integrity="sha384-MYL22lstpGhSa4+udJSGro5I+VfM13fdJfCbAzP9krCEoK5r2EDFdgTg2+DGXdj+"></script>
    <script src="/js/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"></script>
    <script src="/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"></script>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container">
        <!-- <a class="navbar-brand mr-auto" href="#"><img style="height: 50px" src="assets/img/apache-feather.png" /></a> -->
        <a class="navbar-brand mr-auto" href="/"><img src="/assets/img/activemq_logo_black_small.png" style="height: 50px"/></a>
        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="ml-auto collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="/news">News</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownComponents" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Components<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-center" aria-labelledby="navbarDropdownComponents">
                        <div class="row">
                            <div class="col-12">
                                <ul class="multi-column-dropdown">
                                    <li class="nav-item"><a class="dropdown-item" href="/components/classic">ActiveMQ Classic</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/artemis/">ActiveMQ Artemis</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/nms">NMS Clients</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/cms">CMS Client</a></li>
                                </ul>
                            </div>
                        </div>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownCommunity" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Community<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-center multi-column columns-1" aria-labelledby="navbarDropdownCommunity">
                        <div class="row">
                            <div class="col-12">
                                <ul class="multi-column-dropdown">
                                    <li class="nav-item"><a class="dropdown-item" href="/contact">Contact Us</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/contributing">Contribute</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/issues">Report Issues</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/support">Get Support</a></li>
                                </ul>
                            </div>
                          </div>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownTeam" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="/assets/img/feather.png" style="height:20px">Apache<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-center multi-column columns-1" aria-labelledby="navbarDropdownTeam">
                        <div class="row">
                            <div class="col-sm-12">
                                <ul class="multi-column-dropdown">
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org">The Apache Software Foundation</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/licenses/">License</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/security-advisories">Security</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/events/current-event">Events</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://people.apache.org/phonebook.html?pmc=activemq">PMC & Committers</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://whimsy.apache.org/board/minutes/ActiveMQ.html">Board Reports</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a></li>
                                </ul>
                            </div>
                        </div>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="content">
  <div class="page-title-classic">
    <div class="container">
      <h1>Version 5 Run Broker</h1>
    </div>
  </div>
  <div class="container" >
    <div class="row" style="margin-top: 30px">
      <div class="col-12 classic">
        <p><a href="using-activemq-classic-5">Using ActiveMQ Classic 5</a> &gt; <a href="version-5-run-broker">Version 5 Run Broker</a></p>

<h1 id="running-an-activemq-classic-broker">Running an ActiveMQ Classic Broker</h1>

<p>Note if you want to use an <strong>embedded broker</strong> then see <a href="how-do-i-embed-a-broker-inside-a-connection">How do I embed a Broker inside a Connection</a></p>

<p>The <a href="download">binary distribution</a> of ActiveMQ Classic comes with a script called ‘activemq’ which allows you to run a broker.<br />
For details regarding the activemq init script file review  <a href="unix-shell-script">Unix Shell Script</a>  and  <a href="activemq-classic-command-line-tools-reference">ActiveMQ Classic Command Line Tools Reference</a></p>

<p>Typing the following will run an ActiveMQ Classic Broker using the out of the box configuration in the foreground</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/activemq console
</code></pre></div></div>
<p>You can then use a <a href="broker-configuration-uri">Broker Configuration URI</a> to specify how to start and configure your broker using a single URI. For example</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/activemq console broker:(tcp://localhost:61616,network:static:tcp://remotehost:61616)?persistent=false&amp;useJmx=true
</code></pre></div></div>
<p>Or you can a <a href="broker-xbean-uri">Broker XBean URI</a> to customize the Message Broker using the <a href="xml-configuration">Xml Configuration</a> to suit your needs. You can run a broker with a specific XML configuration as</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/activemq console xbean:foo.xml
</code></pre></div></div>
<p>Or you can use a <a href="broker-properties-uri">Broker Properties URI</a> to customize the Message Broker using a properties file; which avoids the dependency on Spring, xbean-spring and XML.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/activemq console properties:foo.properties
</code></pre></div></div>

<h3 id="monitoring-the-broker">Monitoring the broker</h3>

<p>You can monitor ActiveMQ Classic using the <a href="web-console">Web Console</a> by pointing your browser at</p>

<p><a href="http://localhost:8161/admin">http://localhost:8161/admin</a></p>

<p>From ActiveMQ Classic 5.8 onwards the web apps is secured out of the box.</p>

<p>The default username and password is admin/admin. You can configure this in the conf/jetty-real.properties file.</p>

<p>Or you can use the <a href="jmx">JMX</a> support to view the running state of ActiveMQ Classic.</p>

<p>For more information see the file <code class="language-plaintext highlighter-rouge">docs/WebConsole-README.txt</code> in the distribution.</p>

<h3 id="running-the-broker-inside-a-servlet-engine">Running the broker inside a Servlet Engine</h3>

<p>See the source code (or WAR) of the <a href="web-console">Web Console</a> for an example of how to run the broker inside a web application using Spring.</p>

<h3 id="running-the-broker-inside-your-j2ee-application-server">Running the broker inside your J2EE Application Server</h3>

<p>Whether its Apache Geronmio, JBoss, WebLogic or some other J2EE container you should be able to just reconfigure and then deploy the activemq-*.rar which is included in the binary distribution as a deployment unit in your app server. By default the rar is not configured to start an embedded broker. But by setting the brokerXmlConfig on the resource adapter configuration, the resource adapter will start an embedded broker.</p>

<p>For more details see <a href="j2ee">J2EE</a></p>

<h3 id="running-the-broker-from-the-source-code">Running the broker from the source code</h3>

<p>From the latest <a href="source">checkout</a> of the code you can run a broker using the <a href="activemq-classic-performance-module-users-manual">ActiveMQ Classic Performance Plugin</a></p>

<h3 id="running-the-broker-from-maven">Running the broker from maven</h3>

<p>You can download and install the ActiveMQ Classic Startup Maven Plugin via the following command if you are in a directory with a pom.xml. More detailed usage <a href="maven2-activemq-broker-plugin">here</a></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn org.apache.activemq.tooling:maven-activemq-plugin:5.0-SNAPSHOT:run    
</code></pre></div></div>
<p>You can also include it the pom and run it using:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn activemq:run          
</code></pre></div></div>
<p>Handling JMS brokers going down
——————————-</p>

<p>A common requirement is that if the JMS broker goes down you want to automatically detect the failure and try to reconnect under the covers so that your application does not have to worry about reconnection.</p>

<p>There is detailed documentation on this in <a href="configuring-version-5-transports">Configuring Version 5 Transports</a>; briefly…</p>

<p>Just change your connection URI i to</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>failover:tcp://host:port
</code></pre></div></div>
<p>And the JMS client will auto-reconnect to the broker if it is shutdown and restarted later on.</p>


      </div>
    </div>
  </div>
</div>
<div class="row sitemap">
  <div class="col-sm-12">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <div class="row">
            <div class="col-sm-3">
              <div >
                <img class="float-left" style="max-height: 100px" src="/assets/img/activemq_logo_white_vertical_small.png"/>
              </div>
            </div>
            <div style="text-align: center; margin-bottom: 0px; margin-top: 30px; font-size: 65%" class="col-sm-6">
              <p><a href="https://www.apache.org/foundation/marks/list/">Apache, ActiveMQ, Apache ActiveMQ</a>, the Apache feather logo, and the Apache ActiveMQ project logo are trademarks of The Apache Software Foundation. Copyright &copy; 2024, The Apache Software Foundation. Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>.</p>
            </div>
            <div class="col-sm-3">
              <div >
                <a href="https://www.apache.org"><img class="float-right" style="margin-top: 10px; max-height: 80px" src="/assets/img/apache-logo-small.png"/></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>

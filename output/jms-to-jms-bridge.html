<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ActiveMQ</title>
    <link rel="icon" type="image/png" href="/assets/img/favicon.png">

    <link rel="stylesheet" href="/css/main.css">
    <script defer src="/js/fontawesome-v5.0.8-all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ"></script>
    <script src="/js/jquery-3.6.1.slim.min.js" integrity="sha384-MYL22lstpGhSa4+udJSGro5I+VfM13fdJfCbAzP9krCEoK5r2EDFdgTg2+DGXdj+"></script>
    <script src="/js/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"></script>
    <script src="/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"></script>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container">
        <!-- <a class="navbar-brand mr-auto" href="#"><img style="height: 50px" src="assets/img/apache-feather.png" /></a> -->
        <a class="navbar-brand mr-auto" href="/"><img src="/assets/img/activemq_logo_black_small.png" style="height: 50px"/></a>
        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="ml-auto collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="/news">News</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownComponents" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Components<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-center" aria-labelledby="navbarDropdownComponents">
                        <div class="row">
                            <div class="col-12">
                                <ul class="multi-column-dropdown">
                                    <li class="nav-item"><a class="dropdown-item" href="/components/classic">ActiveMQ "Classic"</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/artemis/">ActiveMQ Artemis</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/nms">NMS Clients</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/components/cms">CMS Client</a></li>
                                </ul>
                            </div>
                        </div>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownCommunity" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Community<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-center multi-column columns-1" aria-labelledby="navbarDropdownCommunity">
                        <div class="row">
                            <div class="col-12">
                                <ul class="multi-column-dropdown">
                                    <li class="nav-item"><a class="dropdown-item" href="/contact">Contact Us</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/contributing">Contribute</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/issues">Report Issues</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/support">Get Support</a></li>
                                </ul>
                            </div>
                          </div>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownTeam" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="/assets/img/feather.png" style="height:20px">Apache<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-center multi-column columns-1" aria-labelledby="navbarDropdownTeam">
                        <div class="row">
                            <div class="col-sm-12">
                                <ul class="multi-column-dropdown">
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org">The Apache Software Foundation</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/licenses/">License</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/security-advisories">Security</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/events/current-event">Events</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://people.apache.org/phonebook.html?pmc=activemq">PMC & Committers</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://whimsy.apache.org/board/minutes/ActiveMQ.html">Board Reports</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a></li>
                                </ul>
                            </div>
                        </div>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="content">
  <div class="page-title-activemq5">
    <div class="container">
      <h1>JMS to JMS Bridge</h1>
    </div>
  </div>
  <div class="container" >
    <div class="row" style="margin-top: 30px">
      <div class="col-12 activemq5">
        <p><a href="connectivity">Connectivity</a> &gt; <a href="jms-to-jms-bridge">JMS to JMS Bridge</a></p>

<blockquote>
  <p><strong>Warning</strong>, try Camel first!</p>

  <p>Note that we recommend you look at using <a href="http://camel.apache.org/">Apache Camel</a> for bridging ActiveMQ to or from any message broker (or indeed <a href="http://camel.apache.org/components.html">any other technology, protocol or middleware</a>) as its much easier to:</p>

  <ul>
    <li>keep things flexible; its very easy to map different queue/topic to one or more queues or topics on the other provider</li>
    <li>perform content based routing, filtering and other <a href="http://camel.apache.orgFeatures/enterprise-integration-patterns">Enterprise Integration Patterns</a></li>
    <li>allows you to work with <a href="http://camel.apache.org/components.html">any technology, protocol or middleware</a>, not just JMS providers</li>
  </ul>

  <p>e.g. in your Spring XML file just add:</p>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="mqseries:Foo.Bar"/&gt;
    &lt;to uri="activemq:Cheese"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;
</code></pre></div>  </div>
</blockquote>

<h3 id="introduction">Introduction</h3>

<p>ActiveMQ provides bridging functionality to other JMS providers that implement the JMS 1.0.2 and above specification. A JMS bridge can be co-located with an ActiveMQ broker or run remotely. In order to support JMS 1.0.2 there is seperation between Queues and Topics.</p>

<p>temporary destinations and replyTo destinations in the inbound message exchanges are automatically handled, enabling an ActiveMQ service to handle a foreign JMS TopicRequestor or QueueResquestor exchanges.</p>

<h3 id="properties">Properties</h3>

<p><strong>JMS Bridge Topic Connector</strong></p>

<table>
  <thead>
    <tr>
      <th>property name</th>
      <th>default value</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>localTopicConnection</td>
      <td>null</td>
      <td>if set will be used to connect to ActiveMQ</td>
    </tr>
    <tr>
      <td>localTopicConnectionFactory</td>
      <td>null</td>
      <td>used to initialize the ActiveMQ JMS Connection if localTopicConnection is not set</td>
    </tr>
    <tr>
      <td>localClientId</td>
      <td>null</td>
      <td>set the id of the local connection</td>
    </tr>
    <tr>
      <td>outboundClientId</td>
      <td>null</td>
      <td>set the id of the outbound connection</td>
    </tr>
    <tr>
      <td>jndiLocalTemplate</td>
      <td>Spring default template</td>
      <td>used for locating the Connection Factory for the ActiveMQ Connection if the localTopicConnection or localTopicConnectionFactory is not set</td>
    </tr>
    <tr>
      <td>outboundTopicConnection</td>
      <td>null</td>
      <td>if set will be used to connect to the foreign JMS provider</td>
    </tr>
    <tr>
      <td>outboundTopicConnectionFactory</td>
      <td>null</td>
      <td>used to initialize the foreign JMS Connection if outboundTopicConnection is not set</td>
    </tr>
    <tr>
      <td>jndiOutboundTemplate</td>
      <td>Spring default template</td>
      <td>used for locating the Connection Factory for the ActiveMQ Connection if the localTopicConnection or localTopicConnectionFactory is not set</td>
    </tr>
    <tr>
      <td>localUsername</td>
      <td>null</td>
      <td>if set will be used for authentication to the ActiveMQ JMS provider</td>
    </tr>
    <tr>
      <td>localPassword</td>
      <td>null</td>
      <td>if set will be used for authentication to the ActiveMQ JMS provider</td>
    </tr>
    <tr>
      <td>outboundUsername</td>
      <td>null</td>
      <td>if set will be used for authentication to the foreign JMS provider</td>
    </tr>
    <tr>
      <td>outboundPassword</td>
      <td>null</td>
      <td>if set will be used for authentication to the foreign JMS provider</td>
    </tr>
    <tr>
      <td>inboundMessageConvertor</td>
      <td>null</td>
      <td>if set will be used for converting foreign JMS Messages to a format for ActiveMQ</td>
    </tr>
    <tr>
      <td>outboundMessageConvertor</td>
      <td>null</td>
      <td>if set will be used for converting ActiveMQ messages to a format for the foriegn JMS provider</td>
    </tr>
    <tr>
      <td>inboundTopicBridges</td>
      <td>null</td>
      <td>an array of InboundTopicBridge instances - used for defining inbound (subscribe to) traffic from the foreign JMS provider</td>
    </tr>
    <tr>
      <td>outboundTopicBridges</td>
      <td>null</td>
      <td>an array of OutboundTopicBridge instances - used for defining destinations that will be published to the foreign JMS provider</td>
    </tr>
  </tbody>
</table>

<p><strong>JMS Bridge Queue Connector</strong></p>

<table>
  <thead>
    <tr>
      <th>property name</th>
      <th>default value</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>localQueueConnection</td>
      <td>null</td>
      <td>if set will be used to connect to ActiveMQ</td>
    </tr>
    <tr>
      <td>localQueueConnectionFactory</td>
      <td>null</td>
      <td>used to initialize the ActiveMQ JMS Connection if localQueueConnection is not set</td>
    </tr>
    <tr>
      <td>localClientId</td>
      <td>null</td>
      <td>set the id of the local connection</td>
    </tr>
    <tr>
      <td>outboundClientId</td>
      <td>null</td>
      <td>set the id of the outbound connection</td>
    </tr>
    <tr>
      <td>jndiLocalTemplate</td>
      <td>Spring default template</td>
      <td>used for locating the Connection Factory for the ActiveMQ Connection if the localQueueConnection or localQueueConnectionFactory is not set</td>
    </tr>
    <tr>
      <td>outboundQueueConnection</td>
      <td>null</td>
      <td>if set will be used to connect to the foreign JMS provider</td>
    </tr>
    <tr>
      <td>outboundQueueConnectionFactory</td>
      <td>null</td>
      <td>used to initialize the foreign JMS Connection if localQueueConnection is not set</td>
    </tr>
    <tr>
      <td>jndiOutboundTemplate</td>
      <td>Spring default template</td>
      <td>used for locating the Connection Factory for the ActiveMQ Connection if the localQueueConnection or localQueueConnectionFactory is not set</td>
    </tr>
    <tr>
      <td>localUsername</td>
      <td>null</td>
      <td>if set will be used for authentication to the ActiveMQ JMS provider</td>
    </tr>
    <tr>
      <td>localPassword</td>
      <td>null</td>
      <td>if set will be used for authentication to the ActiveMQ JMS provider</td>
    </tr>
    <tr>
      <td>outboundUsername</td>
      <td>null</td>
      <td>if set will be used for authentication to the foreign JMS provider</td>
    </tr>
    <tr>
      <td>outboundPassword</td>
      <td>null</td>
      <td>if set will be used for authentication to the foreign JMS provider</td>
    </tr>
    <tr>
      <td>inboundMessageConvertor</td>
      <td>null</td>
      <td>if set will be used for converting foreign JMS Messages to a format for ActiveMQ</td>
    </tr>
    <tr>
      <td>outboundMessageConvertor</td>
      <td>null</td>
      <td>if set will be used for converting ActiveMQ messages to a format for the foriegn JMS provider</td>
    </tr>
    <tr>
      <td>inboundQueueBridges</td>
      <td>null</td>
      <td>an array of InboundQueueBridge instances - used for defining inbound (subscribe to) traffic from the foreign JMS provider</td>
    </tr>
    <tr>
      <td>outboundQueueBridges</td>
      <td>null</td>
      <td>an array of OutboundQueueBridge instances - used for defining destinations that will be forwarded to the foreign JMS provider</td>
    </tr>
  </tbody>
</table>

<h4 id="topic-bridges">Topic Bridges</h4>

<p><strong>InboundTopicBridge</strong></p>

<table>
  <thead>
    <tr>
      <th>property name</th>
      <th>default value</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>localTopicName</td>
      <td>null</td>
      <td>the name of the local ActiveMQ Queue</td>
    </tr>
    <tr>
      <td>inboundTopicName</td>
      <td>null</td>
      <td>the foreign topic name to subscribe to</td>
    </tr>
    <tr>
      <td>selector</td>
      <td>null</td>
      <td>selector to use - if any</td>
    </tr>
    <tr>
      <td>consumerName</td>
      <td>null</td>
      <td>if set will create a durable consumer</td>
    </tr>
  </tbody>
</table>

<p><strong>OutboundTopicBridge</strong></p>

<table>
  <thead>
    <tr>
      <th>property name</th>
      <th>default value</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>localTopicName</td>
      <td>null</td>
      <td>the name of the local ActiveMQ Queue</td>
    </tr>
    <tr>
      <td>outboundTopicName</td>
      <td>null</td>
      <td>the foreign topic name to publish to</td>
    </tr>
  </tbody>
</table>

<h4 id="queue-bridges">Queue Bridges</h4>

<p><strong>InboundQueueBridge</strong></p>

<table>
  <thead>
    <tr>
      <th>property name</th>
      <th>default value</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>localQueueName</td>
      <td>null</td>
      <td>the name of the local ActiveMQ Queue</td>
    </tr>
    <tr>
      <td>inboundQueueName</td>
      <td>null</td>
      <td>the foreign queue name to receive from</td>
    </tr>
    <tr>
      <td>selector</td>
      <td>null</td>
      <td>selector to use - if any</td>
    </tr>
  </tbody>
</table>

<p><strong>OutboundQueueBridge</strong></p>

<table>
  <thead>
    <tr>
      <th>property name</th>
      <th>default value</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>localQueueName</td>
      <td>null</td>
      <td>the name of the local ActiveMQ Queue</td>
    </tr>
    <tr>
      <td>outboundQueueName</td>
      <td>null</td>
      <td>the foreign queue name to send to</td>
    </tr>
  </tbody>
</table>

<h3 id="example-xbean-configuration">Example XBean Configuration</h3>

<p>The following <a href="http://svn.apache.org/repos/asf/activemq/trunk/activemq-unit-tests/src/test/resources/org/apache/activemq/network/jms/queue-xbean.xml">example config file</a> shows how to use the regular <a href="xml-configuration">Xml Configuration</a> to configure a JMS to JMS bridge.</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;broker</span> <span class="na">xmlns=</span><span class="s">"http://activemq.apache.org/schema/core"</span> <span class="na">id=</span><span class="s">"localbroker"</span>
  <span class="na">brokerName=</span><span class="s">"localBroker"</span> <span class="na">persistent=</span><span class="s">"false"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;jmsBridgeConnectors&gt;</span>
    <span class="nt">&lt;jmsQueueConnector</span>
      <span class="na">outboundQueueConnectionFactory=</span><span class="s">"#remoteFactory"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;inboundQueueBridges&gt;</span>
        <span class="nt">&lt;inboundQueueBridge</span>
          <span class="na">inboundQueueName=</span><span class="s">"org.apache.activemq.network.jms.QueueBridgeXBeanTest"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/inboundQueueBridges&gt;</span>
    <span class="nt">&lt;/jmsQueueConnector&gt;</span>
  <span class="nt">&lt;/jmsBridgeConnectors&gt;</span>
  <span class="nt">&lt;transportConnectors&gt;</span>
    <span class="nt">&lt;transportConnector</span> <span class="na">uri=</span><span class="s">"tcp://localhost:61234"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/transportConnectors&gt;</span>
<span class="nt">&lt;/broker&gt;</span>
<span class="c">&lt;!-- JMS ConnectionFactory to use remote --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"remoteFactory"</span>
  <span class="na">class=</span><span class="s">"org.apache.activemq.ActiveMQConnectionFactory"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"brokerURL"</span> <span class="na">value=</span><span class="s">"tcp://localhost:61666"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre></div></div>

<h3 id="example-pure-spring-configuration">Example pure Spring Configuration</h3>

<p>The following example shows how to use raw Spring XML to wire together a broker - bridging to a Foreign JMS provider</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- local broker with embedded Jms to Jms bridge (ok - it's contrived) --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"localbroker"</span> <span class="na">class=</span><span class="s">"org.apache.activemq.broker.BrokerService"</span>
  <span class="na">init-method=</span><span class="s">"start"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"brokerName"</span> <span class="na">value =</span> <span class="s">"localBroker"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"persistent"</span> <span class="na">value =</span> <span class="s">"false"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"transportConnectorURIs"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;list&gt;</span>
      <span class="nt">&lt;value&gt;</span>tcp://localhost:61234<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jmsBridgeConnectors"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;list&gt;</span>
      <span class="nt">&lt;ref</span> <span class="na">bean=</span><span class="s">"jmsConnector"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="c">&lt;!-- JMS ConnectionFactory to use local broker (the one with the bridge) --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"localFactory"</span>
  <span class="na">class=</span><span class="s">"org.apache.activemq.ActiveMQConnectionFactory"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"brokerURL"</span> <span class="na">value=</span><span class="s">"tcp://localhost:61234"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="c">&lt;!--JmsTopicConnector - the Jms bridge --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"jmsConnector"</span>
  <span class="na">class=</span><span class="s">"org.apache.activemq.network.jms.JmsTopicConnector"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">"outboundTopicConnectionFactory"</span> <span class="na">ref =</span> <span class="s">"remoteFactory"</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">"inboundTopicBridges"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;list&gt;</span>
      <span class="nt">&lt;ref</span> <span class="na">bean=</span><span class="s">"InboundTopicBridge"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id =</span><span class="s">"InboundTopicBridge"</span> <span class="na">class=</span><span class="s">"org.apache.activemq.network.jms.InboundTopicBridge"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">"inboundTopicName"</span> <span class="na">value =</span> <span class="s">"org.apache.activemq.network.jms.TopicBridgeSpringTest"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre></div></div>

<h3 id="example-xbean-configuration-to-bridge-activemq-to-provider-with-no-url-setter">Example XBean Configuration to Bridge ActiveMQ to Provider With No URL Setter</h3>

<p>Some JMS providers, WebLogic for instance, do not expose a setter for connection properties like host and port (setBrokerUrl) on their ConnectionFactory object. In this case you need to set outboundQueueConnectionFactoryName and jndiOutboundTemplate in your activemq.xml config file.</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- START SNIPPET: example --&gt;</span>
<span class="nt">&lt;beans&gt;</span>

  <span class="c">&lt;!-- Allows us to use system properties as variables in this configuration file --&gt;</span>
  <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;broker</span> <span class="na">useJmx=</span><span class="s">"true"</span> <span class="na">xmlns=</span><span class="s">"http://activemq.org/config/1.0"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;persistenceAdapter&gt;</span>
        <span class="nt">&lt;journaledJDBC</span> <span class="na">journalLogFiles=</span><span class="s">"5"</span> <span class="na">dataDirectory=</span><span class="s">"${activemq.home}/activemq-data"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/persistenceAdapter&gt;</span>

    <span class="nt">&lt;transportConnectors&gt;</span>
       <span class="nt">&lt;transportConnector</span> <span class="na">name=</span><span class="s">"default"</span> <span class="na">uri=</span><span class="s">"tcp://localhost:61616"</span> <span class="na">discoveryUri=</span><span class="s">"multicast://default"</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;transportConnector</span> <span class="na">name=</span><span class="s">"stomp"</span>   <span class="na">uri=</span><span class="s">"stomp://localhost:61613"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/transportConnectors&gt;</span>

    <span class="nt">&lt;networkConnectors&gt;</span>
      <span class="nt">&lt;networkConnector</span> <span class="na">name=</span><span class="s">"default"</span> <span class="na">uri=</span><span class="s">"multicast://default"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/networkConnectors&gt;</span>

    <span class="nt">&lt;jmsBridgeConnectors&gt;</span>
     <span class="nt">&lt;jmsQueueConnector</span> <span class="na">name=</span><span class="s">"JreportRequestBridge-Inbound"</span>
        <span class="na">jndiOutboundTemplate=</span><span class="s">"#remoteJndi"</span>
        <span class="na">outboundQueueConnectionFactoryName=</span><span class="s">"jms/ConnectionFactory"</span>
        <span class="na">localQueueConnectionFactory=</span><span class="s">"#localFactory"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;inboundQueueBridges&gt;</span>
          <span class="nt">&lt;inboundQueueBridge</span> <span class="na">inboundQueueName=</span><span class="s">"jms/queue/jreport/request"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/inboundQueueBridges&gt;</span>
      <span class="nt">&lt;/jmsQueueConnector&gt;</span>
    <span class="nt">&lt;/jmsBridgeConnectors&gt;</span>

  <span class="nt">&lt;/broker&gt;</span>

    <span class="c">&lt;!-- Set up the template for connecting to Weblogic --&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"remoteJndi"</span> <span class="na">class=</span><span class="s">"org.springframework.jndi.JndiTemplate"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"environment"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;props&gt;</span>
                        <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">"java.naming.factory.initial"</span><span class="nt">&gt;</span>weblogic.jndi.WLInitialContextFactory<span class="nt">&lt;/prop&gt;</span>
                        <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">"java.naming.provider.url"</span><span class="nt">&gt;</span>t3://<span class="nt">&lt;your</span> <span class="err">ip</span> <span class="err">here</span><span class="nt">&gt;</span>:7001<span class="nt">&lt;/prop&gt;</span>
                <span class="nt">&lt;/props&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"localFactory"</span>
    <span class="na">class=</span><span class="s">"org.apache.activemq.ActiveMQConnectionFactory"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"brokerURL"</span> <span class="na">value=</span><span class="s">"tcp://localhost:61616"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"localQueue"</span> <span class="na">class=</span><span class="s">"org.apache.activemq.command.ActiveMQQueue"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"dynamic/jms.queue.jreport.request"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
<span class="c">&lt;!-- END SNIPPET: xbean --&gt;</span>
</code></pre></div></div>

<h3 id="example-pure-spring-configuration-for-sending-messages-to-external-activemq-destination-through-bridge">Example pure Spring Configuration for sending messages to external ActiveMQ destination through bridge</h3>

<p>Spring beans:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd"&gt;</span>

<span class="nt">&lt;beans&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"mainBroker"</span> <span class="na">class=</span><span class="s">"org.apache.activemq.broker.BrokerService"</span> <span class="na">init-method=</span><span class="s">"start"</span> <span class="na">destroy-method=</span><span class="s">"stop"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"brokerName"</span> <span class="na">value =</span> <span class="s">"mainBroker"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"persistent"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"transportConnectorURIs"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;list&gt;</span>
        <span class="nt">&lt;value&gt;</span>tcp://localhost:7000<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"bridgedBroker"</span> <span class="na">class=</span><span class="s">"org.apache.activemq.broker.BrokerService"</span> <span class="na">init-method=</span><span class="s">"start"</span> <span class="na">destroy-method=</span><span class="s">"stop"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"brokerName"</span> <span class="na">value =</span> <span class="s">"bridgedBroker"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"persistent"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"transportConnectorURIs"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;list&gt;</span>
        <span class="nt">&lt;value&gt;</span>tcp://localhost:7001<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jmsBridgeConnectors"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;list&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.activemq.network.jms.JmsQueueConnector"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"outboundQueueConnectionFactory"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.activemq.ActiveMQConnectionFactory"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"brokerURL"</span> <span class="na">value=</span><span class="s">"tcp://localhost:7000"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/bean&gt;</span>
          <span class="nt">&lt;/property&gt;</span>
          <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"outboundQueueBridges"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;list&gt;</span>
              <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.activemq.network.jms.OutboundQueueBridge"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"messages.input"</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;/bean&gt;</span>
            <span class="nt">&lt;/list&gt;</span>
          <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
      <span class="nt">&lt;/list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>
<p>Java code:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class BridgeTest {

  public BridgeTest() throws Exception {

      Log log = LogFactory.getLog(getClass());

      new ClassPathXmlApplicationContext("bridge/context-bridge.xml");

      ActiveMQConnection connection = ActiveMQConnection.makeConnection("tcp://localhost:7001");
      connection.start();
      Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
      Destination destination = session.createQueue("messages.input");
      MessageProducer producer = session.createProducer(destination);
      producer.send(session.createTextMessage("Test Message"));
      log.debug("send message");
      session.close();
      connection.close();

      connection = ActiveMQConnection.makeConnection("tcp://localhost:7000");
      connection.start();
      session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
      destination = session.createQueue("messages.input");
      MessageConsumer consumer = session.createConsumer(destination);
      log.debug("receive message");
      Message message = consumer.receive(5000);
      log.debug("Received: " + message);
      session.close();
      connection.close();
  }

  public static void main(String[] args) throws Exception {
    new BridgeTest();
  }

}
</code></pre></div></div>

      </div>
    </div>
  </div>
</div>
<div class="row sitemap">
  <div class="col-sm-12">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <div class="row">
            <div class="col-sm-3">
              <div >
                <img class="float-left" style="max-height: 100px" src="/assets/img/activemq_logo_white_vertical_small.png"/>
              </div>
            </div>
            <div style="text-align: center; margin-bottom: 0px; margin-top: 30px; font-size: 65%" class="col-sm-6">
              <p><a href="https://www.apache.org/foundation/marks/list/">Apache, ActiveMQ, Apache ActiveMQ</a>, the Apache feather logo, and the Apache ActiveMQ project logo are trademarks of The Apache Software Foundation. Copyright &copy; 2023, The Apache Software Foundation. Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>.</p>
            </div>
            <div class="col-sm-3">
              <div >
                <a href="https://www.apache.org"><img class="float-right" style="margin-top: 10px; max-height: 80px" src="/assets/img/apache-logo-small.png"/></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
